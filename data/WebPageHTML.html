<!DOCTYPE html>
<html>

<head>
    <title>IOT PROJECT</title>
    <link rel="stylesheet" trype="text/css" href="styles.css">
</head>

<body>
    <div class="container">
        <h1>PLANT MONITORING AND WATERING WEB</h1>
        <p>Temperature: <span class="temperature">{{celsiusTemp}} Â°C</span></p>
        <p>Moisture: <span class="moisture">{{humidity}} %</span></p>
        <p>Presence: <span class="presence">{{presence}}</span></p>
        <p class="symbol" id="plantSymbol">ðŸŒµ</p>
        
        <h2>Actions:</h2>
        <button class="waterButton" onclick="waterPlant()">Water the plant</button>
        <button class="alarmButton" onclick="alarmPlant()">Activate the alarm</button>
        <p></p>
        <div>
            <label class="toggle">
            <input class="toggle-checkbox" type="checkbox" id="whatsappToggle" onclick="toggleWhatsAppNotifications()">
            <div class="toggle-switch"></div>
            <span class="toggle-label">WhatsApp Notifications</span>
          </label>
          
        </div>
        <style>
            .spacer {
                margin-bottom: 60px; /* Adjust the value as needed */
            }
        </style>
        <div class="spacer"></div>
        <div class="footer">&copy;<span id="year"> </span><span> Universitat politÃ¨cnica de Catalunya. All rights reserved.</span></div>
    </div>

    <script>
        // JavaScript functions for interaction and data display

        // Function to simulate watering the plant
        function waterPlant() {
            document.addEventListener("DOMContentLoaded", function () {
            var activatePumpButton = document.getElementById("activatePump");

            activatePumpButton.addEventListener("click", function () {
            // Send an HTTP request to the ESP8266 to activate the water pump
            var xhr = new XMLHttpRequest();
            xhr.open("GET", "/activate_pump", true);
            xhr.send();});
            });
        alert("Watering the plant...");
        }
        function alarmPlant(){
            document.addEventListener("DOMContentLoaded", function () {
            var activatePumpButton = document.getElementById("activateAlarm");

            activatePumpButton.addEventListener("click", function () {
            // Send an HTTP request to the ESP8266 to activate the water pump
            var xhr = new XMLHttpRequest();
            xhr.open("GET", "/activate_alarm", true);
            xhr.send();});
            });
        }

        // Function to toggle WhatsApp notifications
        function toggleWhatsAppNotifications() {
            const whatsappToggle = document.getElementById("whatsappToggle");
            if (whatsappToggle.checked) {
                // Enable WhatsApp notifications
                // You can add code here to set up WhatsApp notifications
                // via the WhatsApp API when the switch is turned on.
                alert("WhatsApp notifications enabled.");
            } else {
                // Disable WhatsApp notifications
                // You can add code here to disable WhatsApp notifications.
                alert("WhatsApp notifications disabled.");
            }
        }
    </script>
</body>

</html>
